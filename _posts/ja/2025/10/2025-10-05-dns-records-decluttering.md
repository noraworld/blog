---
layout: post
title: "noraworld.com の DNS レコードを整理した"
author: [
  "noraworld"
]
description: "かつて noraworld.com で利用されていたレコードを振り返るとともに、整理した過程をまとめる。"
image: "https://noraworld.github.io/box-ivysaur/2025/10/06/7d22edad40c0dfe5feb8c9c72fab7419.png"
date: 2025-10-05 03:00:00 +09:00
tags: []
published: true
---

### はじめに
[ドメインオタクの自分がかつて所有していたドメインたち](https://noraworld.github.io/blog/former-domains) でも書いたとおり、かつて 15 〜 20 個所有していたドメインだが、現在は `noraworld.com` のみを所有している。そしてその `noraworld.com` の中でもサブドメインという形で様々なウェブサイトを運営していた。その他、かつて Mastodon を自鯖で運営していたころにシステムメールを送信するための設定などが DNS レコードとして登録されたままになっていた。それらも身辺整理の一環として整理しようと思い最近その作業を行っていた。その作業が一通り完了したので記録としてまとめておくことにする。



### きっかけ
きっかけは旧日記システムのソースコードを管理する GitHub リポジトリの Website (URL) 欄に、当時運営していたころの `noraworld.com` のサブドメインが登録されたままになっていたこと。URL を更新するのもそうだけど、もう運営していないならサブドメインやその他設定の DNS レコードも消したほうがいいよなと思ったのがきっかけだ。

`noraworld.com` 自体は今も持っているわけだから、当初はせっかくだからリダイレクト処理をしようと思っていたのだが、いろいろ考えているうちに、そこまでアクセスされていたわけではないだろうから SEO 的にもそんなに気にする必要はないかなと思ったのと、どうせそこまで効果ないなら、もうすっきりさせたいよなということで、リダイレクトはやめて思い切って削除することにした。詳しくは [Cloudflare は信用できない](https://noraworld.github.io/blog/cloudflare-distrust) で書いたとおり。



### 整理前の DNS レコード一覧
DNS レコードの削除はウェブサイトやメールの機能に影響をもたらすとともに不可逆な操作なので、証跡を残しておいた。ウェブサイトはすべて、閉じた、あるいはこれを機に閉じても良いものだけだったので懸念はなかったが、メールに関してはこのドメインを取得した 2018 年 7 月からずっとこのメールアドレスを使用している。なので万が一のことを考えて操作の前に記録を残しておいたほうがいいと思った。その一覧を以下に示す。

⚠️ [ドメインオタクの自分がかつて所有していたドメインたち](https://noraworld.github.io/blog/former-domains) のときと同様に、ここに表示されている IP アドレスは、すでに筆者の手元で管理されているものではないので、不用意にアクセスしないよう注意されたし。

| No.  | タイプ   | 名前                                                    | データ                                                                  | TTL   | 優先度 |
| ---: | :-----: | :----------------------------------------------------: | :--------------------------------------------------------------------: | :---: | :---: |
|    1 | `A`     | `@`                                                    | `185.199.108.153`                                                      | 1 時間 |       |
|    2 | `A`     | `@`                                                    | `185.199.109.153`                                                      | 1 時間 |       |
|    3 | `A`     | `@`                                                    | `185.199.110.153`                                                      | 1 時間 |       |
|    4 | `A`     | `@`                                                    | `185.199.111.153`                                                      | 1 時間 |       |
|    5 | `A`     | `blog`                                                 | `133.130.119.194`                                                      | 1 時間 |       |
|    6 | `A`     | `diary`                                                | `34.193.61.173`                                                        | 1 時間 |       |
|    7 | `A`     | `mastodon`                                             | `34.193.61.173`                                                        | 1 時間 |       |
|    8 | `NS`    | `@`                                                    | `ns29.domaincontrol.com.`                                              | 1 時間 |       |
|    9 | `NS`    | `@`                                                    | `ns30.domaincontrol.com.`                                              | 1 時間 |       |
|   10 | `CNAME` | `aujwxh36le3265fgt4vzzxilh22ptv5u._domainkey.mastodon` | `aujwxh36le3265fgt4vzzxilh22ptv5u.dkim.amazonses.com.`                 | 1 時間 |       |
|   11 | `CNAME` | `deletegappsnotbefore20180711utc`                      | `case-16314121-for-noraworld.com-at.google.com.`                       | 1 時間 |       |
|   12 | `CNAME` | `hcbxfz3tsjjouvwloswwtaykgt73hdaa._domainkey.mastodon` | `hcbxfz3tsjjouvwloswwtaykgt73hdaa.dkim.amazonses.com.`                 | 1 時間 |       |
|   13 | `CNAME` | `yrbgqtc3epusxf3uopbxo63enjoknlpl._domainkey.mastodon` | `yrbgqtc3epusxf3uopbxo63enjoknlpl.dkim.amazonses.com.`                 | 1 時間 |       |
|   14 | `SOA`   | `@`                                                    | `ns29.domaincontrol.com.`                                              | 1 時間 |       |
|   15 | `MX`    | `@`                                                    | `aspmx.l.google.com.`                                                  | 1 時間 |     1 |
|   16 | `MX`    | `@`                                                    | `aspmx2.googlemail.com.`                                               | 1 時間 |    10 |
|   17 | `MX`    | `@`                                                    | `aspmx3.googlemail.com.`                                               | 1 時間 |    10 |
|   18 | `MX`    | `@`                                                    | `alt1.aspmx.l.google.com.`                                             | 1 時間 |     5 |
|   19 | `MX`    | `@`                                                    | `alt2.aspmx.l.google.com.`                                             | 1 時間 |     5 |
|   20 | `MX`    | `mastodon`                                             | `inbound-smtp.us-east-1.amazonaws.com.`                                | 1 時間 |    10 |
|   21 | `TXT`   | `@`                                                    | `google-site-verification=bp89Vrxvl2qhx3XRYU0gnPmeVGoXEBsXsM2PF8-HdAs` | 1 時間 |       |
|   22 | `TXT`   | `@`                                                    | `v=spf1 include:_spf.google.com ~all`                                  | 1 時間 |       |
|   23 | `TXT`   | `_amazonses.mastodon`                                  | `XO8q8MpQ9Ix0eYu+Y4RMa1ai1BXPr525s4crW/aky7c=`                         | 1 時間 |       |

"No." は今後の説明のために便宜上振った。実際にこのような番号が存在しているわけではないし、この順番が重要なわけでもない。

#### A レコード
ウェブサイトを設定するための、最も基本となるレコードである。

No. 1 〜 4 は GitHub Pages の IP アドレスである。GitHub Pages で使用したいドメインの DNS レコードに上記のように設定した上で、リポジトリの GitHub Pages を有効にして `CNAME` というファイルに当該ドメインを書き込むと、そのドメインで GitHub Pages が利用できるようになる。

[GitHub Pages サイトのカスタムドメインを管理する - GitHub Docs](https://docs.github.com/ja/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site)

かつてこれは [`noraworld/noraworld.com`](https://github.com/noraworld/noraworld.com) というリポジトリで使われていたのだが、この時期すでにポートフォリオを作ることに飽きていたというか、あまりモチベーションがなかったので、5 年以上ずっと放置してしまっていた。身辺整理を行う段階で、もうこれは GitHub Pages すら保持する必要はないよなと判断し、DNS レコードも削除した。

No. 5 〜 7 はそれぞれのサブドメインのウェブサイト用である。いずれももうこのドメインでは運営はされていないが、サブドメイン名からそれらがどのようなウェブサイトであったかはおおかた予想がつくだろう。No. 5 の IP アドレスは ConoHa VPS のもので、No. 6, 7 は Amazon AWS Lightsail のものである。一番最初に借りたサーバが ConoHa VPS で、後にこのドメインとは無関係な用途でさくら VPS を借りていたこともあり、そのあと AWS に乗り移った。

ConoHa VPS に関してはだいぶ前に解約したので DNS レコードだけがずっと放置されたままになっていた。Lightsail は数回 IP アドレスが変わっている。Static IP を associate してあったのだが、Lightsail を長期間放置しているうちになぜかアクセスできなくなってしまい、原因も不明で、仕方がないので再起動したら IP アドレスが変わってしまった。おそらくこれは 3 代目 IP アドレスだったと思う。

#### NS レコード / SOA レコード
どの DNS サーバに問い合わせを行うかを指定するためのレコードである。

`noraworld.com` は取得もこれまでの管理も GoDaddy で行っており、ネームサーバも他に移管していないので、No. 8 と No. 9 の `NS` に関しては GoDaddy のデフォルトのものが設定されている。同様の理由で No. 14 の `SOA` もデフォルトのままである。これらは変更したことがない。

#### CNAME レコード
サブドメインにエイリアス（別名）を付与するためのレコードである。様々な用途で使用されるが、調べればすぐに出てくるので詳細は割愛する。

No. 10, 12, 13 は、Mastodon インスタンスを運営する上でシステムメールを送信する必要があり、Amazon SES を利用していたときの DKIM の設定である。

No. 11 に関しては、後述するが不明である。Google Workspace (当時の G Suite) 関連のものであるのは間違いないはずだが、何のために設定したものなのか、まったく覚えていない。Google Workspace のサポートチームにもわからないと言われた。

#### MX レコード
メールを設定するためのレコードである。独自ドメインのメールアドレスが設定できるようになる。

No. 15 〜 19 の `MX` に関しては Google Workspace を利用して、独自ドメインで Gmail を利用するための設定である。この設定により Gmail でのメールの受信・送信が独自ドメインで行えるようになる。

No. 20 は Mastodon でメールを送信するための設定である。AWS に紐づいていた。

#### TXT レコード
ドメインの所有権を証明するときなど、特定の用途に依存しないメモ的なレコードである。

各種 TXT レコードの設定である。まず No. 21 に関しては、Google にこのドメインの正当な所有者であることを証明するために設定を促されたレコードである。Google が用意したこの文字列を TXT レコードとして設定することで、たしかにこのドメインを所有しているということが証明できる。

[30 万円のプレミアムドメインだった noraworld.com を取得しました](https://noraworld.github.io/blog/get-noraworld-com) に書いたとおり、もともと `noraworld.com` はプレミアムドメインとして設定されており、かつては別の業者が使用していた。その業者が Google Workspace (当時の G Suite) を使っていたかどうかは定かではないが、ドメインの所有権が移ったことを Google に証明するために（Google Workspace が利用できるようにするために）設定する必要があった。

No. 22 に関しては Google Workspace の SPF レコードである。このドメインを使って Gmail からメールを送信する際に、迷惑メールだと判定されないようにするための重要な設定である。これに関しては今でも Gmail を利用しているから削除せずにそのまま残している。

No. 23 は、はっきりとは覚えていないのだが、Mastodon でメール送信を行う際に、Amazon AWS にドメインの所有権を証明するためのものだったと思う。No. 22 の Mastodon 版（Amazon AWS 版）だと思う。



### Google Workspace (旧 G Suite) に関するレコードについて
さて、ウェブサイトにはもう使っていないので A レコードに関してはごっそり削除することができた。また、Mastodon インスタンスももう運営していないのでそれに関する DKIM などの設定（Amazon SES の設定）も削除できた。気になったのは Google Workspace に関する設定だった。

これはまさにこの DNS レコードを整理する過程でヘルプページを見て知ったのだが、実は 2023 年以降の Google Workspace では、MX レコードに `smtp.google.com` を設定するよう案内されているようだ。

[Google Workspace の MX レコードを設定する - Google Workspace 管理者 ヘルプ](https://support.google.com/a/answer/16004259?hl=ja)

`smtp.google.com` の 1 レコードのみである。`noraworld.com` で Google Workspace (当時の G Suite) の契約を開始したのは 2018 年 7 月のことで、この当時は上記の表にあるとおり 5 つの MX レコードを設定する必要があった。

つまり、2023 年以前は

| タイプ | 名前   | データ                      | TTL   | 優先度 |
| :---: | :---: | :------------------------: | :---: | :---: |
| `MX`  | `@`   | `aspmx.l.google.com.`      | 1 時間 |     1 |
| `MX`  | `@`   | `aspmx2.googlemail.com.`   | 1 時間 |    10 |
| `MX`  | `@`   | `aspmx3.googlemail.com.`   | 1 時間 |    10 |
| `MX`  | `@`   | `alt1.aspmx.l.google.com.` | 1 時間 |     5 |
| `MX`  | `@`   | `alt2.aspmx.l.google.com.` | 1 時間 |     5 |

だったのが、今は

| タイプ | 名前   | データ              | TTL   | 優先度 |
| :---: | :---: | :----------------: | :---: | :---: |
| `MX`  | `@`   | `smtp.google.com.` | 1 時間 |     1 |

となっている。だいぶシンプルである。2023 年以前に契約を開始したドメインおよびアカウントであっても、2023 年以降のレコードに変更できるのであればとても見栄えがすっきりする。今回このように整理をするのであれば、せっかくならシンプルな新しい MX レコードに更新したいと思った。

また、Google Workspace (当時の G Suite) で No. 11 と No. 21 があるが、これらはすでにドメイン認証済みのため、削除しても良いと思ったのだが、なにせ 2018 年 7 月以来ずっと放置していたので確信が持てなかった。

そこで、Google Workspace のサポートに問い合わせてみることにした。こういうときに有料版だとサポートが手厚いところが嬉しいポイントである。はじめは AI による回答を信じようと思ったが、AI は間違える可能性がある。そして、DNS レコード変更・削除はリスクの高い操作で、メールに関しては現在も利用しているので、操作を誤ると Gmail が利用できなくなる懸念があった。正確性を期すため、確実な回答としてサポートチームに問い合わせることにした。[^google_workspace_support]

[^google_workspace_support]: 自分用メモ: [DNS レコードの削除と更新に関して認識の間違いがないか念のため確認させていただきたいです](https://support.cloud.google.com/portal/cases/details;name=customers%2FC01b5sgj1%2Fcases%2F63332382)

#### 回答内容
回答内容は以下のとおりだった。

まず MX レコードに関しては、2023 年以前に契約したドメイン・アカウントであっても、新しいレコード `smtp.google.com.` が使えるとのことだった。その際の手順は以下の通り。

1. MX レコードに `smtp.google.com` を追加
2. TTL に設定された時間以上経過し DNS に反映されていることを確認
3. 既存の 5 つの MX レコード（No. 15 〜 19）を削除

TTL で設定されている時間以上待てば問題はないのだが、心配性なので、念には念を入れて [ヘルプページ](https://support.google.com/a/answer/16004259?hl=ja) に記載されているとおり、それぞれの DNS レコード変更のタイミングで 72 時間以上待った。変更手順中も特にダウンタイムもなく Gmail を利用することができた。変更後も特に問題はなかった。

また、No. 21 の TXT は、すでにドメインの所有権を確認済みなので削除しても問題ないと回答をもらった。

そして No. 11 の CNAME に関してだが、これは Google Workspace のサポートチームも、何のための設定かはわからないが、少なくともメールの設定には不要なので削除して問題ないとのことだった。もう 7 年以上前のことなので自分も覚えていないのだが、`google` って入っているから Google Workspace (当時の G Suite) に設定するよう指示されたもののはず。ただ、ドメインの所有権は No. 21 だけで満たされているはずだから、いったいなんだったんだろう。メールを振り返ってもそれらしきメールは出てこなかった。謎である。

ともかく、No. 21 に加えて No. 11 も削除したが、特に支障は出ていないのでたぶん問題ないだろう。

わかってはいたが、一応 No. 22 は削除してはいけないか確認したところ、削除しないようお達しがあった。なのでこれはそのまま残した。

[SPF を設定する - Google Workspace 管理者 ヘルプ](https://support.google.com/a/answer/33786?hl=ja)



### 整理後の DNS レコード一覧
というわけで、最終的にはこのようになった。だいぶすっきりした。A レコードと CNAME レコードが一掃された。また、サブドメインもなくなった。ウェブサイトに使わなくなったから当然なのだが。

| タイプ | 名前   | データ                                 | TTL   | 優先度 |
| :---: | :---: | :-----------------------------------: | :---: | :---: |
| `NS`  | `@`   | `ns29.domaincontrol.com.`             | 1 時間 |       |
| `NS`  | `@`   | `ns30.domaincontrol.com.`             | 1 時間 |       |
| `SOA` | `@`   | `ns29.domaincontrol.com.`             | 1 時間 |       |
| `MX`  | `@`   | `smtp.google.com.`                    | 1 時間 |     1 |
| `TXT` | `@`   | `v=spf1 include:_spf.google.com ~all` | 1 時間 |       |



### おわりに
Google Workspace のサポートチームに問い合わせたときにも言われたのだが、新しい MX レコードに差し替えても問題はないが、あえて変更する必要もない。それからすでに不要になったレコード（ドメイン認証用レコード等）に関しても、実害がないなら削除する必要はないと AI からの回答もあった。むしろ誤った操作により必要なレコードを削除してしまうリスクがあるから、そのままにしておくのも一つの手である。

しかしやはり不要な設定をいつまでも残しておくっていうのは心理的に気持ちが悪い。古く冗長なレコードも同様だ。喜多方先生の言葉を借りるなら、「[どうせ汚れるからってトイレを掃除しないようなもの](https://dic.pixiv.net/a/%E6%A1%91%E5%90%8D%E4%BB%81)」である。やはり掃除をするのは気持ちがいい。すべてのレコードを整理したあとは、達成感もあった。

ドメインも `noraworld.com` 以外は手放し[^domain_decluttering]、その `noraworld.com` もレコードを必要最小限に整理したことで、いい意味でも悪い意味でも「レガシー」に取り組むことができたと思う。デジタルレガシーはこの他にもたくさんあるのだが、死ぬまでの間にすべて整理できたらいいな。

[^domain_decluttering]: これをやったのはだいぶ前のことではあるが。
